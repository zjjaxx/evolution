## 微前端能解决什么问题

- 大型项目复杂度高，打包时间长
- 团队协作技术栈不统一
- 增量迁移

微前端就是将不同功能按照不同维度拆分成多个子应用，通过主应用来加载子应用

## 如何实现微前端

我们可以将一个应用划分为若干个子应用，将子应用打包成一个个模块，当路径切换时加载不同的子应用

### 实现微前端需要解决哪些问题

- 数据间如何通信
- 应用间如何隔离（js隔离和css隔离）

### 实现方案

#### iframe

- 通过iframe加载子应用
- 通信可以通过postMessage进行通信
- 完美的沙盒机制自带应用隔离

缺点： 用户体验差（弹窗只能在iframe中、滚动条、内部切换刷新就会丢失状态）

#### web Components

- 将前端应用分解为自定义HTML元素
- 基于customEvent实现通信
- Shadow DOM天生作用域隔离

缺点：兼容性差、学习成本高、调试困难、修改样式困难

#### single-spa

- single-spa通过路由劫持实现应用加载，采用SystemJS加载应用或则模块
- 基于props主子应用通信
- 无沙盒机制，需要自己实现JS沙盒以及CSS沙盒

缺点： 学习成本、无沙盒机制，需要对原有的应用进行改造，子应用间相同资源重复加载问题

#### 模块联邦

- 通过模块联邦将组件进行打包导出使用
- 共享模块的方式进行通信
- 无CSS沙盒和JS沙盒

## systemJs

### 工作流程

1. 源代码打包后的结果为 System.register有2个参数：依赖列表，回调函数返回一个setters，execute
2. 先扫描模块映射表，react，react-dom依赖加载后，调用setters 回调函数，将依赖注入给源代码
3. 执行源代码

### 原理

```

```



 